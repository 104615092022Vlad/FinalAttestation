<!DOCTYPE html>
<html>
    <head>
        <title>Create your own shop</title>
        <link rel="stylesheet" type="text/css" href="main.css">
        <script>
            function f() {
                const xhr = new XMLHttpRequest();

                const body = '{"name": "12", "count": 12}';
                xhr.open('post', 'http://192.168.88.253:4000/product/add', true);
                xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        console.log(xhr.response)
                    }
                }

                xhr.send(body);
            }
        </script>
    </head>
    <body>
    <header>
        <img src="icon.png" width="100" height="100">
        <div id="links">
            <a href="#create_shop">Create shop</a>
            <a href="#all_shops">All shops</a>
            <a href="#delete_shop">Delete shop</a>
        </div>
    </header>
        <section id="greetings">
            <h1>Welcome to our shop constructor!</h1>
            <div>
                <p>Here you can test the next things:</p>
                <ul>
                    <li>Enter a name to create a new shop.</li>
                    <li>Created shops will be displayed at the list below.</li>
                    <li>You also can delete them with delete form.</li>
                </ul>
            </div>
        </section>
        <section align="center">
            <h2>The idea of our product is very simple</h2>
            <p>Forget about Avito sales and create your own online shop!</p>
            <h3>Stop sell like that!</h3>
            <img src="1.png" width="300px" height="300px">
            <img src="2.png" width="300px" height="300px">
            <img src="3.png" width="300px" height="300px">
            <img src="4.png" width="300px" height="300px">
            <img src="5.png" width="300px" height="300px">
            <h3>Sales can be simpler</h3>
            <img src="site.jpg">
        </section>
        <section id="shops">
            <div id="shops_div">
                <a id="all_shops"></a>
                <h2>Already created shops</h2>
                <table>
                    <thead>
                        <th>id</th>
                        <th>name</th>
                        <th>public</th>
                    </thead>
                    <tbody id="response">
                    </tbody>
                </table>
                <script type="text/javascript">
                    var xhr = new XMLHttpRequest();
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === 4) {
                            let shops = JSON.parse(xhr.response);
                            for (let i = 0; i < shops.length; i++) {
                                document.getElementById("response").innerHTML +=
                                    `<tr><td>${shops[i].id}</td>
                                    <td>${shops[i].name}</td>
                                    <td>${shops[i].count}</td></tr>`;
                            }
                        }
                    }
                    xhr.open('get', 'http://192.168.88.253:4000/product/all', true);
                    xhr.send();
                </script>
            </div>
        </section>
        <section class="error">
            <p>There're some rules of shop naming:</p>
            <ul>
                <li>Name should start with a capital letter</li>
                <li>Name's length should be more than 7 symbols</li>
            </ul>
        </section>
        <form id="create" onsubmit="f()">
            <a id="create_shop"></a>
            <div class="form">
                <h2>Create a shop</h2>
                <label>Name</label>
                <br>
                <input id="name" type="text" placeholder="Enter any name">
                <br>
                <button type="submit">Create shop</button>
                <div>
                    <input type="checkbox">
                    <label>I want to create a public shop</label>
                </div>
                <div>
                    <input type="checkbox">
                    <label>I agree to subscribe to newsletter</label>
                </div>
            </div>
        </form>
        <br>
        <section class="error">
            <p>Cannot delete this shop. It doesn't exists</p>
        </section>
        <form id="delete">
            <a id="delete_shop"></a>
            <div class="form">
                <h2>Delete a shop</h2>
                <label>Name</label>
                <br>
                <input type="number" placeholder="Enter id of your shop">
                <br>
                <button type="submit">Delete shop</button>
            </div>
        </form>
    <footer>
        <p>Contact with us</p>
        <a href="/">Telegram</a>
        <br>
        <a href="/">Twitter</a>
    </footer>
    </body>
</html>